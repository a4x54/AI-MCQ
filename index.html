<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Quiz Platform - AI Quiz Platform</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Floating Theme Toggle (Always Visible) -->
    <button class="floating-theme-toggle" onclick="toggleTheme()" title="Toggle Theme">
        <i class="fas fa-moon" id="floatingThemeIcon"></i>
    </button>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Home Page -->
    <div id="homePage" class="page active">
        <div class="hero-section">
            <div class="container">
                <div class="hero-content">
                    <h1 class="hero-title">
                        <i class="fas fa-graduation-cap"></i>
                        Smart Quiz Platform
                    </h1>
                    <p class="hero-subtitle">Test your knowledge with AI-generated interactive questions</p>
                    <div class="hero-decoration">
                        <div class="decoration-circle circle-1"></div>
                        <div class="decoration-circle circle-2"></div>
                        <div class="decoration-circle circle-3"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="welcome-card">
                <div class="welcome-icon">
                    <i class="fas fa-hand-sparkles"></i>
                </div>
                <h2>Welcome, Dear Student!</h2>
                <p>Choose the subject you want to test and start your learning journey</p>
            </div>

            <div class="subjects-grid" id="subjectsGrid">
                <!-- Subject cards will be dynamically inserted here -->
            </div>
        </div>

        <!-- Footer -->
        <footer class="site-footer">
            <div class="container">
                <p>&copy; 2024 Smart Quiz Platform. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Lectures Selection Page -->
    <div id="lecturesPage" class="page">
        <div class="page-header">
            <div class="container">
                <div class="header-content">
                    <button class="back-btn" onclick="goToHome()">
                        <i class="fas fa-arrow-left"></i>
                        Back to Home
                    </button>

                    <div class="header-title">
                        <div class="subject-header-icon" id="lecturesSubjectIcon"></div>
                        <div>
                            <h1 class="page-title" id="lecturesSubjectTitle"></h1>
                            <p class="page-subtitle" id="lecturesSubjectDesc"></p>
                        </div>
                    </div>

                    <div class="subject-stats">
                        <div class="stat-item">
                            <i class="fas fa-book"></i>
                            <span id="totalLectures">0</span> Lectures
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-check-circle"></i>
                            <span id="completedLectures">0</span> Completed
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-star"></i>
                            <span id="avgScore">0%</span> Average
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="lectures-actions">
                <button class="btn btn-primary btn-large" onclick="startAllLectures()">
                    <i class="fas fa-layer-group"></i>
                    All Lectures Combined
                </button>
                <button class="btn btn-secondary" onclick="showAnalytics()">
                    <i class="fas fa-chart-line"></i>
                    Analytics
                </button>
            </div>

            <div class="lectures-grid" id="lecturesGrid">
                <!-- Lecture cards will be inserted here -->
            </div>
        </div>

        <!-- Footer -->
        <footer class="site-footer">
            <div class="container">
                <p>&copy; 2024 Smart Quiz Platform. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Analytics Dashboard Page -->
    <div id="analyticsPage" class="page">
        <div class="page-header">
            <div class="container">
                <button class="back-btn" onclick="goBack()">
                    <i class="fas fa-arrow-left"></i>
                    Back
                </button>
                <h1 class="page-title">
                    <i class="fas fa-chart-bar"></i>
                    Analytics Dashboard
                </h1>
            </div>
        </div>

        <div class="container">
            <div class="analytics-grid">
                <div class="analytics-card">
                    <div class="analytics-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="analytics-value" id="totalQuizzesTaken">0</div>
                    <div class="analytics-label">Quizzes Completed</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-icon">
                        <i class="fas fa-check"></i>
                    </div>
                    <div class="analytics-value" id="totalCorrectAnswers">0</div>
                    <div class="analytics-label">Correct Answers</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-icon">
                        <i class="fas fa-percent"></i>
                    </div>
                    <div class="analytics-value" id="overallAccuracy">0%</div>
                    <div class="analytics-label">Success Rate</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="analytics-value" id="studyStreak">0</div>
                    <div class="analytics-label">Day Streak</div>
                </div>
            </div>

            <div class="achievements-section">
                <h2>Achievements</h2>
                <div class="achievements-grid" id="achievementsGrid">
                    <!-- Achievement badges will be inserted here -->
                </div>
            </div>

            <div class="subject-performance">
                <h2>Performance by Subject</h2>
                <div id="subjectPerformanceList">
                    <!-- Subject performance cards will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="site-footer">
            <div class="container">
                <p>&copy; 2024 Smart Quiz Platform. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Quiz Page -->
    <div id="quizPage" class="page">
        <div class="quiz-header-modern">
            <div class="container">
                <div class="quiz-header-top">
                    <button class="header-btn" onclick="goBack()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="breadcrumb">
                        <span onclick="goToHome()" style="cursor: pointer;">Home</span>
                        <i class="fas fa-chevron-right"></i>
                        <span id="breadcrumbSubject"></span>
                        <i class="fas fa-chevron-right"></i>
                        <span id="breadcrumbLecture">Quiz</span>
                    </div>

                    <div class="quiz-info">
                        <h2 class="quiz-title" id="currentSubjectTitle"></h2>
                        <div class="quiz-meta">
                            <span id="currentLectureTitle"></span>
                        </div>
                    </div>
                    
                    <div class="quiz-stats">
                        <div class="stat-circle">
                            <svg class="mini-progress" viewBox="0 0 100 100">
                                <circle class="mini-progress-bg" cx="50" cy="50" r="45"></circle>
                                <circle class="mini-progress-fill" id="headerProgressCircle" cx="50" cy="50" r="45"></circle>
                            </svg>
                            <div class="stat-value" id="headerProgress">0%</div>
                        </div>
                        
                        <div class="stat-box">
                            <i class="fas fa-clock"></i>
                            <div>
                                <div class="stat-label">Time</div>
                                <div class="stat-value" id="headerTime">00:00</div>
                            </div>
                        </div>
                        
                        <div class="stat-box">
                            <i class="fas fa-star"></i>
                            <div>
                                <div class="stat-label">Score</div>
                                <div class="stat-value" id="headerScore">0</div>
                            </div>
                        </div>
                    </div>

                    <div class="header-actions">
                        <button class="header-btn" onclick="pauseQuiz()" title="Pause">
                            <i class="fas fa-pause"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- PDF Upload Section -->
        <div id="uploadSection" class="upload-section">
            <div class="container">
                <div class="upload-card">
                    <div class="upload-icon">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                    <h3>Upload Lecture PDF File</h3>
                    <p>Or use pre-prepared sample questions</p>
                    
                    <div class="upload-area" id="uploadArea">
                        <input type="file" id="pdfInput" accept=".pdf" hidden>
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Drag and drop file here</p>
                        <span>or</span>
                        <button class="btn btn-secondary" onclick="document.getElementById('pdfInput').click()">
                            <i class="fas fa-folder-open"></i>
                            Choose File
                        </button>
                    </div>

                    <div class="file-selected" id="fileSelected" style="display: none;">
                        <i class="fas fa-check-circle"></i>
                        <span id="fileName"></span>
                    </div>

                    <div class="upload-actions">
                        <button class="btn btn-primary" onclick="generateQuiz()">
                            <i class="fas fa-magic"></i>
                            Generate Quiz
                        </button>
                        <button class="btn btn-outline" onclick="useSampleQuestions()">
                            <i class="fas fa-list-check"></i>
                            Use Sample Questions
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quiz Interface -->
        <div id="quizInterface" class="quiz-interface" style="display: none;">
            <div class="container">
                <div class="quiz-layout">
                    <!-- Question Navigator Sidebar -->
                    <div class="question-navigator">
                        <h3>Question Navigator</h3>
                        <div class="navigator-legend">
                            <div class="legend-item">
                                <span class="legend-box answered"></span>
                                <span>Answered</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-box unanswered"></span>
                                <span>Unanswered</span>
                            </div>
                        </div>
                        <div class="navigator-grid" id="navigatorGrid">
                            <!-- Question numbers will be inserted here -->
                        </div>
                    </div>

                    <!-- Main Quiz Area -->
                    <div class="quiz-main">
                        <!-- Progress Bar -->
                        <div class="progress-container">
                            <div class="progress-info">
                                <span id="progressText">Question 1 of 50</span>
                                <span id="timeElapsed">Time: 00:00</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                        </div>

                        <!-- Question Card -->
                        <div class="question-card" id="questionCard">
                            <div class="question-header">
                                <span class="lecture-badge" id="lectureBadge"></span>
                                <span class="difficulty-badge" id="difficultyBadge"></span>
                            </div>

                            <div class="question-text" id="questionText"></div>

                            <div class="category-tag" id="categoryTag"></div>

                            <div class="question-actions">
                                <button class="hint-btn" id="hintBtn" onclick="toggleHint()">
                                    <i class="fas fa-lightbulb"></i>
                                    Show Hint
                                </button>
                                <button class="bookmark-btn" id="bookmarkBtn" onclick="toggleBookmark()">
                                    <i class="far fa-bookmark"></i>
                                    Save for Review
                                </button>
                            </div>

                            <div class="hint-box" id="hintBox" style="display: none;">
                                <i class="fas fa-info-circle"></i>
                                <span id="hintText"></span>
                            </div>

                            <div class="options-container" id="optionsContainer">
                                <!-- Options will be inserted here -->
                            </div>

                            <div class="quiz-navigation">
                                <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()">
                                    <i class="fas fa-chevron-left"></i>
                                    Previous
                                </button>
                                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()">
                                    Next
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                                <button class="btn btn-success" id="submitBtn" onclick="submitQuiz()" style="display: none;">
                                    <i class="fas fa-check-circle"></i>
                                    Finish Quiz
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="site-footer">
            <div class="container">
                <p>&copy; 2024 Smart Quiz Platform. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Results Page -->
    <div id="resultsPage" class="page">
        <div class="container">
            <div class="results-header">
                <div class="results-score-card">
                    <div class="score-circle" id="scoreCircle">
                        <svg class="score-svg" viewBox="0 0 200 200">
                            <circle class="score-bg" cx="100" cy="100" r="90"></circle>
                            <circle class="score-progress" id="scoreProgress" cx="100" cy="100" r="90"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="score-percentage" id="scorePercentage">0%</div>
                            <div class="score-label">Score</div>
                        </div>
                    </div>
                    <div class="score-details">
                        <div class="score-stat correct">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <div class="stat-value" id="correctCount">0</div>
                                <div class="stat-label">Correct Answers</div>
                            </div>
                        </div>
                        <div class="score-stat incorrect">
                            <i class="fas fa-times-circle"></i>
                            <div>
                                <div class="stat-value" id="incorrectCount">0</div>
                                <div class="stat-label">Wrong Answers</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="results-actions">
                <button class="btn btn-primary" onclick="retryQuiz()">
                    <i class="fas fa-redo"></i>
                    Try Again
                </button>
                <button class="btn btn-secondary" onclick="goToHome()">
                    <i class="fas fa-home"></i>
                    Back to Home
                </button>
            </div>

            <div class="results-review">
                <h2>Answer Review</h2>
                <div id="reviewContainer">
                    <!-- Review items will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="site-footer">
            <div class="container">
                <p>&copy; 2024 Smart Quiz Platform. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loader"></div>
            <p>Generating questions...</p>
        </div>
    </div>

    <script src="app.js" defer></script>
</body>
</html>